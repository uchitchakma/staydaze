(()=>{var e={71:e=>{e.exports=function(){return this.wc.wcSettings}()}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var c=t[r]={exports:{}};return e[r](c,c.exports,n),c.exports}n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};for(var a in(()=>{"use strict";function e(){return e=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},e.apply(null,arguments)}n.r(r);const t=window.wp.element,a=window.wp.htmlEntities;var c=n(71);const o="yith_paypal_payments_custom_card",i=({isLoaded:e,components:{LoadingMask:n}})=>{const{cardNumberLabel:r,expirationDateLabel:a,cvvLabel:c}=yith_ppwc_card_settings;return(0,t.createElement)(n,{isLoading:!e,showSpinner:!0},(0,t.createElement)("div",{className:`wc-block-card-elements payment_method_${o}`},(0,t.createElement)("div",{className:"wc-block-gateway-container wc-card-number-element"},(0,t.createElement)("div",{id:"yith-ppwc-cc-card-number-block",className:"wc-block-yith-ppwc-field empty hosted-field"}),(0,t.createElement)("label",{className:"hosted-fields--label",htmlFor:"yith-ppwc-cc-card-number-block"},r),(0,t.createElement)("div",{id:"card-image"})),(0,t.createElement)("div",{className:"wc-block-gateway-container wc-expiration-date-element"},(0,t.createElement)("div",{id:"yith-ppwc-cc-expiration-date-block",className:"wc-block-yith-ppwc-field empty hosted-field"}),(0,t.createElement)("label",{className:"hosted-fields--label",htmlFor:"yith-ppwc-cc-expiration-date-block"},a)),(0,t.createElement)("div",{className:"wc-block-gateway-container wc-expiration-date-element"},(0,t.createElement)("div",{id:"yith-ppwc-cc-cvv-block",className:"wc-block-yith-ppwc-field empty hosted-field"}),(0,t.createElement)("label",{className:"hosted-fields--label",htmlFor:"yith-ppwc-cc-cvv-block"},c)),(0,t.createElement)("input",{type:"hidden",value:"",id:"yith_paypal_cc_payments-order-id"})))};function l(e,t){var n=[];return e.push({name:"security",value:t},{name:"flow",value:"checkout"}),jQuery.each(e,(function(e,t){n.push(t.name+"="+t.value)})),n.join("&")}const s=n=>{const[r,a]=(0,t.useState)(!1),[c,o]=(0,t.useState)(!1),{components:{LoadingMask:s},description:d,activePaymentMethod:p,emitResponse:u,eventRegistration:m}=n,{onPaymentSetup:y}=m,{threedsecure:h}=yith_ppwc_card_settings,w=(({billing:e,shippingData:n,eventRegistration:r})=>{const{ajaxUrl:a,liabilityList:c,threedsecure:o,ajaxNonce:i}=yith_ppwc_card_settings,[s,d]=(0,t.useState)(""),{onSubmit:p}=r;return{cardFieldsInstance:s,loadSDK:(0,t.useCallback)((()=>{const e=paypal.CardFields({style:{input:{"font-size":"15px","font-weight":"lighter",color:"#ccc",padding:"2.5em 1em 1em"},":focus":{color:"black"},".valid":{color:"black"},".invalid":{color:"black"}},createOrder:(e,t)=>fetch(a,{method:"POST",headers:{"content-type":"application/x-www-form-urlencoded"},body:l([{name:"request",value:"create_order"},{name:"checkoutRequest",value:"checkout"},{name:"orderID",value:""}],i)}).then((function(e){return e.json()})).then((function(e){if(e.error)throw console.log("undefined",e.error),e.error;return document.querySelector("#yith_paypal_cc_payments-order-id").value=e.id,e.id})),onApprove:(e,t)=>{if(e&&e.orderID){if(o){let{liabilityShift:t}=e;if(void 0!==t&&(t=t.toLowerCase(),-1===c.indexOf(t))){if("unknown"===t)throw yith_ppwc_frontend.secure_3d_unknown;if("no"===t)throw yith_ppwc_frontend.secure_3d_no}}fetch(a,{method:"POST",headers:{"content-type":"application/x-www-form-urlencoded"},body:l([{name:"request",value:"approve_order"},{name:"orderID",value:e.orderID},{name:"checkoutRequest",value:"checkout"}])}).then((function(e){return e.json()})).then((function(e){e&&(e.redirect?window.location.href=e.redirect:e.result&&"failure"===e.result&&window.location.reload()),void 0!==p&&p()})).catch((e=>{throw e}))}}});return e.isEligible()&&(e.NumberField().render("#yith-ppwc-cc-card-number-block"),e.CVVField().render("#yith-ppwc-cc-cvv-block"),e.ExpiryField().render("#yith-ppwc-cc-expiration-date-block")),d(e),{cardFields:e}}),[])}})(n),{loadSDK:f}=w;return(0,t.useEffect)((()=>{let e;return function(){try{const{cardFields:t,orderID:n}=f();e=t,o(e),a(!0)}catch(e){console.log(e)}}(),()=>{a(!1),o(!1),e&&void 0!==e.onChange&&e?.teardown()}}),[f]),(0,t.useEffect)((()=>{if("yith_paypal_payments_custom_card"===p)return y((async()=>{if(!c)return{type:u.responseTypes.ERROR,messageContext:u.noticeContexts.PAYMENTS,message:yith_ppwc_frontend.errorMessage};try{const e={};let t=!1;return await c.submit().then((()=>{const t=document.querySelector("#yith_paypal_cc_payments-order-id");e["yith_paypal_cc_payments-order-id"]=jQuery(t).val()})).catch((e=>{t=e})),t?{type:u.responseTypes.ERROR,messageContext:u.noticeContexts.PAYMENTS,message:t.message}:{type:u.responseTypes.SUCCESS,meta:{paymentMethodData:e}}}catch(e){return{type:u.responseTypes.ERROR,messageContext:u.noticeContexts.PAYMENTS,message:e}}}))}),[y,c,u.responseTypes.SUCCESS,u.responseTypes.ERROR,u.noticeContexts.PAYMENTS]),(0,t.createElement)(t.Fragment,null,(0,t.createElement)("div",null,d),(0,t.createElement)(s,{isLoading:!r,showSpinner:!0},(0,t.createElement)(i,e({},n,{isLoaded:a}))))};var d;const{registerPaymentMethod:p}=wc.wcBlocksRegistry,u=(0,c.getPaymentMethodData)(o,{}),m=(0,a.decodeEntities)(u.title),y=(0,a.decodeEntities)(u.description),h=n=>{const{isEditing:r}=n;return r?null:(0,t.createElement)(s,e({description:y},n))};p({name:o,label:(0,t.createElement)((e=>{const{PaymentMethodLabel:n}=e.components;return(0,t.createElement)(t.Fragment,null,(0,t.createElement)(n,{text:m}),(0,t.createElement)("span",{style:{marginLeft:"5px"}}))}),null),content:(0,t.createElement)(h,null),edit:(0,t.createElement)(h,null),canMakePayment:()=>!0,ariaLabel:m,supports:{features:null!==(d=u?.supports)&&void 0!==d?d:[]}})})(),r)this[a]=r[a];r.__esModule&&Object.defineProperty(this,"__esModule",{value:!0})})();